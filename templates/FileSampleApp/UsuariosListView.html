{% extends "base_page.html" %}{% load staticfiles %}{% load avatar_tags %}{% load django_bootstrap_breadcrumbs %}{% block breadcrumbs %}    {{ block.super }}    {% breadcrumb "Usuarios" "users_index" %}{% endblock %}{% block title %}Usuarios{% endblock %}{% block breadcrumbsZone %}{% render_breadcrumbs %}{% endblock %}{% block content %}	<!-- CSS required to bootstrap-notify -->	<!-- <link rel="stylesheet" type="text/css" href="{% static 'bootstrap-notify-master/css/bootstrap-notify.css' %}" />	<link rel="stylesheet" type="text/css" href="{% static 'bootstrap-notify-master/css/styles/alert-bangtidy.css' %}" />	<link rel="stylesheet" type="text/css" href="{% static 'bootstrap-notify-master/css/styles/alert-blackgloss.css' %}" /> -->	<!-- CSS required to bootstrap-notify -->		<!-- CSS required to notifIt -->	<script src="{% static 'notifIt/js/notifIt.js' %}" type="text/javascript"></script>    <link href="{% static 'notifIt/css/notifIt.css' %}" type="text/css" rel="stylesheet">	<!-- CSS required to notifIt -->	    <h1 align="left"><img id="pdfImage" src="{% static 'img/avatar.png' %}" width="70" height="70" style="margin-bottom:-5px" /> Usuarios</h1>	            {% if messages %}        <!-- <div class="alert alert-success">        <button type="button" class="close" data-dismiss="alert">&times;</button>        <h4>Warning!</h4> -->            {% for message in messages %}            {% if message.tags %}{% endif %}                {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}Important: {% endif %}				<script type='text/javascript'>					var msg = "{{ message }}";					Utils.notifyInfoWithNotifIt(msg);				</script>            {% endfor %}        <!-- </div> -->        {% endif %}    <div>    <div style="float:left;margin-left:-10px" class="navbar-form pull-left">    <label>Búsqueda:</label>     <input id="filter" type="text" class="textinput textInput form-control form-control"/>    </div>           <div id="options" style="margin-left:822px;margin-bottom:15px">    <table>        <th>            <a href="#">            <img id="pdf" src="{% static "img/699434-icon-70-document-file-pdf-32.png" %}" />            </a>        </th>        <th>            <a href="#">            <img id="excel" src="{% static "img/698375-icon-96-document-file-xls-32.png" %}" />            </a>        </th>        <th>            <a class="js-open-modal" href="#" data-modal-id="popupEvento">                <img id="search" src="{% static "img/698852-icon-124-printer-text-32.png" %}" />            </a>         </th>    </table>    </div>      </div>      <div id="popupEvento" class="modal-box">      <header> <a href="#" class="js-modal-close close">×</a>        <h3><img id="search" src="{% static "img/699347-icon-74-document-search-32.png" %}" /> Búsqueda de eventos</h3>      </header>      <div class="modal-body">        <form method="get" class="navbar-form pull-left">            <label for="id_q">Especifique criterio de búsqueda:</label>            <input type="text" name="q" id="id_q" class="textinput textInput form-control form-control span8"><input type="hidden" name="order_by" id="id_order_by">            <input type="button" value="Buscar" class="btn btn-small" id="post-form">        </form>      </br></br></br>      <div id="loading" style="margin-left:23%;display:none">          <div style="float:left"><img id="search" src="{% static "img/progress.gif" %}" /> </div>          <div><p>Búsqueda en ejecución, espere unos segundos por favor</p></div>      </div>      </br>      <div id="searchResults" style="margin-left:15px;;display:none">Hola</div>      <div id="searchResultsBody" class="well" style="margin-left:15px;;display:none"></div>      </div>      <footer> <a href="#" class="btn btn-small js-modal-close">Cancelar</a> </footer>    </div>          <div class="table-responsivess">     <table id="eventosList" class="table table-striped table-hover table-condensed footable" data-page-size="5" data-filter="#filter" data-filter-text-only="true">    <thead>    <tr>        <th data-toggle="true">Nombre</th>        <th>Apellidos</th>		<th>Usuario</th>        <th>Correo electrónico</th>		<th>Foto</th>        <th data-hide="phone,tablet">Dirección particular</th>        <th data-hide="phone,tablet">Provincia</th>		<th data-hide="phone,tablet">Municipio</th>		<th data-hide="phone,tablet">Edad</th>		<th data-hide="phone,tablet">Sexo</th>		<th data-hide="phone,tablet">CI</th>		<th data-hide="phone,tablet">Solapin</th>		<th data-hide="phone,tablet">Expediente</th>		<th data-hide="phone,tablet">Categoria Docente</th>		<th data-hide="phone,tablet">Grado Cien&iacute;fico</th>		<th data-hide="phone,tablet">Especialidad de graduado</th>		<th data-hide="phone,tablet">Fecha de graduado</th>		<th data-hide="phone,tablet">Titulo acad&eacute;mico</th>		<th data-hide="phone,tablet">Cargo</th>		<th data-hide="phone,tablet">Rol</th>		<th data-hide="phone,tablet">Grupo</th>    </tr>    </thead>    {% for item in users %}        <tr>            <td><span class="footable-toggle"></span><a href="InvestigadorView/{{ item.id }}">{{ item.first_name }}</a></td>            <td>{{ item.last_name }}</td>            <td>{{ item.username }}</td>            <td>{{ item.email }}</td>			{% if not item|has_avatar %}				<td><div class="image avatar"><img src="{% static 'img/user.png' %}"/></div></td>			{% else %}				<td><div class="image avatar">{% avatar item.username %}</div></td>			{% endif %}			<td>{{ item.perfil.direccion }}</td>			<td>{{ item.perfil.provincia }}</td>			<td>{{ item.perfil.municipio }}</td>			<td>{{ item.perfil.edad }}</td>			<td>{{ item.perfil.sexo }}</td>			<td>{{ item.perfil.carne_identidad }}</td>			<td>{{ item.perfil.solapin }}</td>			<td>{{ item.perfil.expediente }}</td>			<td>{{ item.perfil.categoria_docente }}</td>			<td>{{ item.perfil.grado_cientifico }}</td>			<td>{{ item.perfil.especialidad_graduado }}</td>			<td>{{ item.perfil.anno_graduado }}</td>			<td>{{ item.perfil.titulo_academico }}</td>			<td>{{ item.perfil.cargo }}</td>			<td>{{ item.perfil.rol_saisa }}</td>			<td>{{ item.perfil.grupo }}</td>        </tr>    {% endfor %}    <tfoot>        <tr>            <td colspan="5">                <div class="pagination pagination-centered"></div>            </td>            <td colspan="5">                            </td>        </tr>    </tfoot>	</table>	</div>        <div>        <div style="float:left;margin-top:-5px">            <div class="pagination pagination-centered"></div>        </div>        <div style="float:right">            <button class="btn" id="create-event" href="" type="submit"><img src="{% static "img/698913-icon-81-document-add-32.png" %}" />| Crear usuario            </button>            <button class="btn " id="edit-event" type="submit"><img src="{% static "img/698873-icon-136-document-edit-32.png" %}" />| Editar usuario</button>            <button class="btn " id="delete-event" type="submit"><img src="{% static "img/698910-icon-79-document-cancel-32.png" %}" />| Eliminar usuario</button>        </div>        </div>        </div>		<!-- <div class='notifications bottom-left'></div> -->	<!-- Placed at the end of the document so the pages load faster -->	<!-- <script src="{% static 'bootstrap-notify-master/js/prettify.js' %}"></script>	<script src="{% static 'bootstrap-notify-master/js/bootstrap-transition.js' %}"></script>	<script src="{% static 'bootstrap-notify-master/js/bootstrap-alert.js' %}"></script>	<script src="{% static 'bootstrap-notify-master/js/bootstrap-notify.js' %}"></script> -->		<script type="text/javascript">   $(function() {    var url;    $('.footable').footable({                            toggleHTMLElement: '<span><img src="{% static "img/expand-128.png" %}" class="footable-toggle footable-expand" border="0" alt="Expand" width=16px height=16px><img src="{% static "img/collapse-128.png" %}" class="footable-toggle footable-contract" border="0" alt="Contract" width=16px height=16px></span>'                            });    // Deshabilitamos los botones de edición y eliminación    Utils.disableButtons("edit-event", "delete-event")    // Manejamos el evento click de la tabla que contiene el listado de eventos, en este evento click asignamos a la variable global "window.selectedItemId" el id de la tupla seleccionada    Utils.table_tr_click("eventosList", "edit-event", "delete-event");    // Super Simple Modal Popup section    Utils.DisplayPopup();    // Footable    Utils.footable();		$('#create-event').click(function()     {        url = "{% url 'register' %}";        window.location = url;        //alert(url);    });	    $('#edit-event').click(function()     {        url = "{% url 'user_edit' 12345 %}".replace(/12345/, window.selectedItemId);        window.location = url;    });    $('#delete-event').click(function()     {        url = "{% url 'user_delete' 12345 %}".replace(/12345/, window.selectedItemId);        window.location = url;    });    $('#post-form').click(function()     {        //Mostramos el indicador "cargando"        $('#loading').show();        // Ocultamos, en el caso de estar visible, el div que muestra los resultados de la búsqueda        $('#searchResults').hide();        $('#searchResultsBody').hide();        //Ejecutamos mediante ajax, pasados unos segundos, el post que envia la query de búsqueda        setTimeout(function() {            Utils.searchEvn($("#id_q").val());        }, 3000);    });    $('#pdf').click(function()     {		if({{ users.count }} > 0 )			{			window.open("UsuariosPdf/");		}		else				{			Utils.notifyWithNotifIt();		}    });    $('#excel').click(function()     {		if({{ users.count }} > 0 )			{			window.open("UsuariosCSV/");		}		else				{			Utils.notifyWithNotifIt();		}    });});</script>{% endblock %}