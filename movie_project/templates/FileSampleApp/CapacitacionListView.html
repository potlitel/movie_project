{% extends "base_page.html" %}{% load staticfiles %}{% load django_bootstrap_breadcrumbs %}{% block breadcrumbs %}    {{ block.super }}    {% breadcrumb "Capacitaciones" "capacitacion_index" %}{% endblock %}{% block title %}Registros de capacitaciones{% endblock %}{% block breadcrumbsZone %}{% render_breadcrumbs %}{% endblock %}{% block content %}	<!-- security section -->	{% include 'Security/RolTrabajador.html' %}	<!-- security section -->		<!-- CSS required to bootstrap-notify -->	<!-- <link rel="stylesheet" type="text/css" href="{% static 'bootstrap-notify-master/css/bootstrap-notify.css' %}" />	<link rel="stylesheet" type="text/css" href="{% static 'bootstrap-notify-master/css/styles/alert-bangtidy.css' %}" />	<link rel="stylesheet" type="text/css" href="{% static 'bootstrap-notify-master/css/styles/alert-blackgloss.css' %}" /> -->	<!-- CSS required to bootstrap-notify -->		<!-- CSS required to notifIt -->	<script src="{% static 'notifIt/js/notifIt.js' %}" type="text/javascript"></script>    <link href="{% static 'notifIt/css/notifIt.css' %}" type="text/css" rel="stylesheet">	<!-- CSS required to notifIt -->	    <h1 align="left"><img id="pdfImage" src="{% static "img/Capacitacion.png" %}" width="70" height="70" style="margin-bottom:-5px" /> Registros de Capacitaci&oacute;n</h1>	            {% if messages %}        <!-- <div class="alert alert-success">        <button type="button" class="close" data-dismiss="alert">&times;</button>        <h4>Warning!</h4> -->            {% for message in messages %}            {% if message.tags %}{% endif %}                {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}Important: {% endif %}				<script type='text/javascript'>					var msg = "{{ message }}";					Utils.notifyInfoWithNotifIt(msg);				</script>            {% endfor %}        <!-- </div> -->        {% endif %}    <div>    <div style="float:left;margin-left:-10px" class="navbar-form pull-left">    <label>Búsqueda:</label>     <input id="filter" type="text" class="textinput textInput form-control form-control"/>    </div>        <div id="options" style="margin-left:822px;margin-bottom:15px;">    <table>        <th>            <a href="#">            <img id="pdf" src="{% static "img/699434-icon-70-document-file-pdf-32.png" %}" />            </a>        </th>        <th>            <a href="#">            <img id="excel" src="{% static "img/698375-icon-96-document-file-xls-32.png" %}" />            </a>        </th>        <th>            <a class="js-open-modal" href="#" data-modal-id="popupCapacitacion">                <img id="search" src="{% static "img/698852-icon-124-printer-text-32.png" %}" />            </a>         </th>    </table>    </div>      </div>    <div id="popupCapacitacion" class="modal-box">      <header> <a href="#" class="js-modal-close close">×</a>        <h3><img id="search" src="{% static "img/699347-icon-74-document-search-32.png" %}" /> Búsqueda de capacitaciones</h3>      </header>      <div class="modal-body">        <form method="get" class="navbar-form pull-left">            <label for="id_q">Especifique criterio de búsqueda:</label>            <input type="text" name="q" id="id_q" class="textinput textInput form-control form-control span8"><input type="hidden" name="order_by" id="id_order_by">            <input type="button" value="Buscar" class="btn btn-small" id="post-form">        </form>        </br></br></br>      <div id="loading" style="margin-left:23%;display:none">          <div style="float:left"><img id="search" src="{% static "img/progress.gif" %}" /> </div>          <div><p>Búsqueda en ejecución, espere unos segundos por favor</p></div>      </div>      </br>      <div id="searchResults" style="margin-left:15px;;display:none">Hola</div>      <div id="searchResultsBody" class="well" style="margin-left:15px;;display:none"></div>      </div>      <footer> <a href="#" class="btn btn-small js-modal-close">Cancelar</a> </footer>    </div>             <div class="table-responsives">     <table id="capacitacionesList" class="table table-striped table-hover table-condensed footable" data-page-size="4" data-page-previous-text="prev" data-page-next-text="next" data-filter="#filter" data-filter-text-only="true">    <thead>    <tr>        <th data-toggle="true">Nombre</th>        <th>Tipo</th>		<th>Fecha</th>        <th>Rol</th>        <th>Modalidad</th>        <th data-hide="phone,tablet">Institución</th>        <th data-hide="phone,tablet">Pais</th>        <th data-hide="phone,tablet">Ciudad</th>		<th data-hide="phone,tablet">Profesores a impartir esta capacitación</th>		<th data-hide="phone,tablet">Estudiantes a recibir esta capacitación</th>        <th data-hide="phone,tablet">Fichero</th>    </tr>    </thead>    <!--Este listado deber ser filtrado por propietario (logued user)-->    <tbody>    {% for item in capacitaciones %}        <tr>            <td><span class="footable-toggle"></span><a href="CapacitacionView/{{ item.id }}">{{ item.nombre }}</a></td>            <td>{{ item.tipo }}</td>            <td>{{ item.fecha }}</td>            <td>{{ item.rol }}</td>            <td>{{ item.modalidad }}</td>            <td>{{ item.institucion }}</td>            <td>{{ item.pais }}</td>            <td>{{ item.ciudad }}</td>			<td>				{% for profesor in item.profesores.all %}					<img src="{% static "img/avatar.png" %}" width=20px height=20px> {{ profesor.first_name }} {{ profesor.last_name }}</br>				{% endfor %}			</td>			<td>				{% for estudiante in item.estudiantes.all %}					<img src="{% static "img/avatar.png" %}" width=20px height=20px> {{ estudiante.first_name }} {{ estudiante.last_name }}</br>				{% endfor %}			</td>            <td><a href={{ item.fichero.url }}><img src="{% static "img/699329-icon-57-document-download-32.png" %}" /></a></td>        </tr>		{% empty %}            {% if user.is_authenticated %}            <div class="alert alert-info">                <p>Opps {{ user.username }}, no existen capacitaciones a listar creadas por usted.</p>            </div>        {% endif %}    {% endfor %}    </tbody>    <tfoot>        <tr>            <td colspan="5">                <div class="pagination pagination-centered"></div>            </td>            <td colspan="5">                            </td>        </tr>    </tfoot>	</table>	</div>                <div>        <!-- <div style="float:left;margin-top:-5px">            <div class="pagination pagination-centered"></div>        </div> -->        <div style="float:right">            <button class="btn" id="create-capacitacion" href="" type="submit"><img src="{% static "img/698913-icon-81-document-add-32.png" %}" />| Crear capacitación            </button>            <button class="btn" id="edit-capacitacion" type="submit"><img src="{% static "img/698873-icon-136-document-edit-32.png" %}" />| Editar capacitación</button>            <button class="btn" id="delete-capacitacion" type="submit"><img src="{% static "img/698910-icon-79-document-cancel-32.png" %}" />| Eliminar capacitación</button>        </div>        </div>        </div>	<!-- <div class='notifications bottom-left'></div> -->	<!-- Placed at the end of the document so the pages load faster -->	<!-- <script src="{% static 'bootstrap-notify-master/js/prettify.js' %}"></script>	<script src="{% static 'bootstrap-notify-master/js/bootstrap-transition.js' %}"></script>	<script src="{% static 'bootstrap-notify-master/js/bootstrap-alert.js' %}"></script>	<script src="{% static 'bootstrap-notify-master/js/bootstrap-notify.js' %}"></script>		 -->			<script type="text/javascript">   $(function() {    var url;    $('.footable').footable({                            toggleHTMLElement: '<span><img src="{% static "img/expand-128.png" %}" class="footable-toggle footable-expand" border="0" alt="Expand" width=16px height=16px><img src="{% static "img/collapse-128.png" %}" class="footable-toggle footable-contract" border="0" alt="Contract" width=16px height=16px></span>'                            });    // Deshabilitamos los botones de edición y eliminación    Utils.disableButtons("edit-capacitacion", "delete-capacitacion")    // Manejamos el evento click de la tabla que contiene el listado de capacitaciones, en este evento click asignamos a la variable global "window.selectedItemId" el id de la tupla seleccionada    Utils.table_tr_click("capacitacionesList", "edit-capacitacion", "delete-capacitacion");    // Super Simple Modal Popup section    Utils.DisplayPopup();    // Footable    Utils.footable();		$('#create-capacitacion').click(function()     {        url = "{% url 'cap_create' %}";        window.location = url;        //alert(url);    });	    $('#edit-capacitacion').click(function()     {        url = "{% url 'capacitacion_edit' 12345 %}".replace(/12345/, window.selectedItemId);        window.location = url;    });    $('#delete-capacitacion').click(function()     {        url = "{% url 'capacitacion_delete' 12345 %}".replace(/12345/, window.selectedItemId);        window.location = url;    });    $('#post-form').click(function()     {        //Mostramos el indicador "cargando"        $('#loading').show();        // Ocultamos, en el caso de estar visible, el div que muestra los resultados de la búsqueda        $('#searchResults').hide();        $('#searchResultsBody').hide();        //Ejecutamos mediante ajax, pasados unos segundos, el post que envia la query de búsqueda        setTimeout(function() {            Utils.searchCap($("#id_q").val());        }, 3000);    });    $('#pdf').click(function()     {		if({{ capacitaciones.count }} > 0 )			{			window.open("CapacitacionesPdf/");		}		else				{			Utils.notifyWithNotifIt();		}    });    $('#excel').click(function()     {		if({{ capacitaciones.count }} > 0 )			{			window.open("capacitacionesCSV/");		}		else				{			Utils.notifyWithNotifIt();		}    });});</script>{% endblock %}